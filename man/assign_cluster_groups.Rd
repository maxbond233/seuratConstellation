% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/assign_cluster_groups.R
\name{assign_cluster_groups}
\alias{assign_cluster_groups}
\title{Assign Cluster Groups}
\usage{
assign_cluster_groups(
  knn_graph,
  seu,
  group_by,
  strategy = "majority",
  group_type = "color",
  manual_mapping = NULL
)
}
\arguments{
\item{knn_graph}{A constellation_knn object from build_knn_graph()}

\item{seu}{A Seurat object (must be the same one used in build_knn_graph)}

\item{group_by}{Character. Column name in meta.data for grouping}

\item{strategy}{Character. Grouping strategy: "majority" (default), "strict", or "manual"}

\item{group_type}{Character. Type of grouping: "color" or "hull"}

\item{manual_mapping}{Optional. Named vector for manual cluster-to-group mapping}
}
\value{
A constellation_knn object with group assignments added to cluster_info
}
\description{
Maps clusters to metadata groups based on majority voting or other
strategies. This function separates the grouping logic from the graph building
and color resolution steps, making dependencies explicit.
}
\details{
Strategies:
\itemize{
\item \strong{majority}: Assign each cluster to the most common group among its cells
\item \strong{strict}: Only assign if >90\% of cells belong to one group, else NA
\item \strong{manual}: Use the provided manual_mapping (named vector)
}

Group types:
\itemize{
\item \strong{color}: Adds "color_group" column for color resolution
\item \strong{hull}: Adds "hull_group" column for hull computation
}
}
\examples{
\dontrun{
knn_graph <- build_knn_graph(seu, cluster_col = "celltype")
knn_graph <- assign_cluster_groups(knn_graph, seu,
                                   group_by = "cell_class",
                                   group_type = "color")
knn_graph <- assign_cluster_groups(knn_graph, seu,
                                   group_by = "tissue",
                                   group_type = "hull")
}
}
