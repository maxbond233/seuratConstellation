% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/resolve_cluster_colors.R
\name{resolve_cluster_colors}
\alias{resolve_cluster_colors}
\title{Resolve Cluster Colors}
\usage{
resolve_cluster_colors(
  knn_graph,
  cluster_colors = NULL,
  group_colors = NULL,
  color_mode = "group"
)
}
\arguments{
\item{knn_graph}{A constellation_knn object with cluster centers computed}

\item{cluster_colors}{Optional. Named vector of colors by cluster_label}

\item{group_colors}{Optional. Named vector of colors by group (requires color_group)}

\item{color_mode}{Character. Color mode: "group" (uniform) or "gradient" (shades). Default "group"}
}
\value{
A constellation_knn object with cluster_color added to cl.center.df
}
\description{
Determines the final color for each cluster based on explicit precedence
rules. This function separates color resolution from geometry computation,
making color assignment logic transparent and predictable.
}
\details{
Color resolution precedence (highest to lowest):
\enumerate{
\item \strong{cluster_colors}: If provided and covers all clusters, use directly
\item \strong{group_colors + color_group}: If color_group exists and group_colors provided, map via groups
\item \strong{color_group + auto palette}: If color_group exists, auto-generate group palette
\item \strong{auto cluster palette}: One unique color per cluster
}

Color modes (when using color_group):
\itemize{
\item \strong{group}: All clusters in same group get identical color
\item \strong{gradient}: Clusters in same group get similar shades
}
}
\examples{
\dontrun{
# Auto colors per cluster
knn_graph \%>% resolve_cluster_colors()

# Custom cluster colors
knn_graph \%>% resolve_cluster_colors(
  cluster_colors = c("A" = "red", "B" = "blue", "C" = "green")
)

# Group-based coloring (requires assign_cluster_groups first)
knn_graph \%>%
  assign_cluster_groups(seu, group_by = "cell_class", group_type = "color") \%>%
  resolve_cluster_colors(color_mode = "gradient")

# Custom group colors
knn_graph \%>%
  assign_cluster_groups(seu, group_by = "cell_class", group_type = "color") \%>%
  resolve_cluster_colors(
    group_colors = c("Neuron" = "#E41A1C", "Glia" = "#377EB8"),
    color_mode = "group"
  )
}
}
